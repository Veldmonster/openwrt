--- a/net/mac80211/main.c
+++ b/net/mac80211/main.c
@@ -291,7 +291,7 @@ void ieee80211_restart_hw(struct ieee802
 }
 EXPORT_SYMBOL(ieee80211_restart_hw);
 
-#ifdef CONFIG_INET
+#ifdef __disabled__CONFIG_INET
 static int ieee80211_ifa_changed(struct notifier_block *nb,
 				 unsigned long data, void *arg)
 {
@@ -350,7 +350,7 @@ static int ieee80211_ifa_changed(struct
 }
 #endif
 
-#if IS_ENABLED(CONFIG_IPV6)
+#if IS_ENABLED(__disabled__CONFIG_IPV6)
 static int ieee80211_ifa6_changed(struct notifier_block *nb,
 				  unsigned long data, void *arg)
 {
<<<<<<< HEAD
@@ -1087,14 +1087,14 @@ int ieee80211_register_hw(struct ieee802
=======
@@ -1089,14 +1089,14 @@ int ieee80211_register_hw(struct ieee802
>>>>>>> 871372c42a3fc9c4b33f5c6011742d610a2e5600
 
 	rtnl_unlock();
 
-#ifdef CONFIG_INET
+#ifdef __disabled__CONFIG_INET
 	local->ifa_notifier.notifier_call = ieee80211_ifa_changed;
 	result = register_inetaddr_notifier(&local->ifa_notifier);
 	if (result)
 		goto fail_ifa;
 #endif
 
-#if IS_ENABLED(CONFIG_IPV6)
+#if IS_ENABLED(__disabled__CONFIG_IPV6)
 	local->ifa6_notifier.notifier_call = ieee80211_ifa6_changed;
 	result = register_inet6addr_notifier(&local->ifa6_notifier);
 	if (result)
<<<<<<< HEAD
@@ -1103,13 +1103,13 @@ int ieee80211_register_hw(struct ieee802
=======
@@ -1105,13 +1105,13 @@ int ieee80211_register_hw(struct ieee802
>>>>>>> 871372c42a3fc9c4b33f5c6011742d610a2e5600
 
 	return 0;
 
-#if IS_ENABLED(CONFIG_IPV6)
+#if IS_ENABLED(__disabled__CONFIG_IPV6)
  fail_ifa6:
-#ifdef CONFIG_INET
+#ifdef __disabled__CONFIG_INET
 	unregister_inetaddr_notifier(&local->ifa_notifier);
 #endif
 #endif
-#if defined(CONFIG_INET) || defined(CONFIG_IPV6)
+#if defined(__disabled__CONFIG_INET) || defined(__disabled__CONFIG_IPV6)
  fail_ifa:
 #endif
 	rtnl_lock();
<<<<<<< HEAD
@@ -1137,10 +1137,10 @@ void ieee80211_unregister_hw(struct ieee
=======
@@ -1139,10 +1139,10 @@ void ieee80211_unregister_hw(struct ieee
>>>>>>> 871372c42a3fc9c4b33f5c6011742d610a2e5600
 	tasklet_kill(&local->tx_pending_tasklet);
 	tasklet_kill(&local->tasklet);
 
-#ifdef CONFIG_INET
+#ifdef __disabled__CONFIG_INET
 	unregister_inetaddr_notifier(&local->ifa_notifier);
 #endif
-#if IS_ENABLED(CONFIG_IPV6)
+#if IS_ENABLED(__disabled__CONFIG_IPV6)
 	unregister_inet6addr_notifier(&local->ifa6_notifier);
 #endif
 
